---
import Button from '../ui/Button.astro';
import Icon from '../ui/Icon.astro';
import { siteConfig } from '../../data/site.js';
import { url } from '../../utils/url.js';
---

<section class="relative overflow-hidden bg-gradient-to-b from-w4s-concrete/30 via-white to-white min-h-[90vh] flex items-center">
  <!-- Animated gradient orbs background -->
  <div class="absolute inset-0 overflow-hidden -z-10" aria-hidden="true">
    <div class="gradient-orb gradient-orb-1"></div>
    <div class="gradient-orb gradient-orb-2"></div>
    <div class="gradient-orb gradient-orb-3"></div>

    <!-- Grid pattern overlay -->
    <div class="absolute inset-0 bg-[linear-gradient(rgba(10,26,47,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(10,26,47,0.03)_1px,transparent_1px)] bg-[size:60px_60px]"></div>

    <!-- Floating decorative shapes -->
    <div class="absolute top-20 left-[15%] w-4 h-4 bg-w4s-accent/30 rounded-full floating-element"></div>
    <div class="absolute top-40 right-[20%] w-6 h-6 bg-w4s-navy/20 rounded-lg floating-element-delayed rotate-45"></div>
    <div class="absolute bottom-32 left-[25%] w-3 h-3 bg-w4s-success/40 rounded-full floating-element-slow"></div>
    <div class="absolute top-1/3 right-[10%] w-8 h-8 border-2 border-w4s-accent/20 rounded-lg floating-element rotate-12"></div>
    <div class="absolute bottom-1/4 right-[30%] w-5 h-5 bg-w4s-accent/20 rounded-full floating-element-delayed"></div>
  </div>

  <div class="container-w4s py-16 md:py-24 lg:py-32 relative z-10">
    <div class="max-w-4xl mx-auto text-center">
      <!-- Animated Badge -->
      <div class="scroll-animate inline-flex items-center gap-2 px-5 py-2.5 glass rounded-full text-small font-medium mb-8 shadow-lg">
        <span class="relative flex h-2.5 w-2.5">
          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-w4s-success opacity-75"></span>
          <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-w4s-success"></span>
        </span>
        <span class="text-w4s-navy">Spécialistes disponibles maintenant</span>
      </div>

      <!-- Main Heading with gradient animation -->
      <h1 class="scroll-animate stagger-1 text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-w4s-navy mb-6 text-balance leading-tight">
        Experts à votre
        <span class="block mt-2">
          <span class="gradient-text-animated">service.</span>
        </span>
      </h1>

      <!-- Subheading with icons -->
      <div class="scroll-animate stagger-2 flex flex-wrap items-center justify-center gap-4 md:gap-6 text-body-lg text-w4s-navy/70 mb-10">
        <span class="flex items-center gap-2">
          <span class="w-8 h-8 rounded-full bg-w4s-accent/10 flex items-center justify-center">
            <Icon name="users" size={16} class="text-w4s-accent" />
          </span>
          Spécialistes vérifiés
        </span>
        <span class="hidden sm:block w-1.5 h-1.5 bg-w4s-navy/30 rounded-full"></span>
        <span class="flex items-center gap-2">
          <span class="w-8 h-8 rounded-full bg-w4s-success/10 flex items-center justify-center">
            <Icon name="clock" size={16} class="text-w4s-success" />
          </span>
          Intervention rapide
        </span>
        <span class="hidden sm:block w-1.5 h-1.5 bg-w4s-navy/30 rounded-full"></span>
        <span class="flex items-center gap-2">
          <span class="w-8 h-8 rounded-full bg-w4s-navy/10 flex items-center justify-center">
            <Icon name="check" size={16} class="text-w4s-navy" />
          </span>
          Devis transparent
        </span>
      </div>

      <!-- CTAs with effects -->
      <div class="scroll-animate stagger-3 flex flex-col sm:flex-row items-center justify-center gap-4 mb-12">
        <a
          href={url('/contact')}
          class="group relative inline-flex items-center gap-2 px-8 py-4 bg-w4s-accent text-white font-semibold rounded-xl btn-shimmer btn-glow transition-all duration-300 hover:scale-105"
        >
          <span>Demander une intervention</span>
          <Icon name="arrow-right" size={20} class="transition-transform group-hover:translate-x-1" />
        </a>
        <a
          href={url('/urgence')}
          class="group relative inline-flex items-center gap-2 px-8 py-4 bg-w4s-urgent text-white font-semibold rounded-xl ripple transition-all duration-300 hover:scale-105 hover:shadow-xl"
        >
          <span class="relative flex h-2.5 w-2.5">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"></span>
            <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-white"></span>
          </span>
          <span>Urgence 24/7</span>
        </a>
      </div>

      <!-- Trust badges with animation -->
      <div class="scroll-animate stagger-4 flex flex-wrap items-center justify-center gap-x-8 gap-y-4">
        <div class="flex items-center gap-2 px-4 py-2 bg-white/80 rounded-full shadow-sm hover:shadow-md transition-shadow">
          <span class="w-6 h-6 rounded-full bg-w4s-success/20 flex items-center justify-center">
            <Icon name="check" size={14} class="text-w4s-success" />
          </span>
          <span class="text-small font-medium text-w4s-navy/80">Sans engagement</span>
        </div>
        <div class="flex items-center gap-2 px-4 py-2 bg-white/80 rounded-full shadow-sm hover:shadow-md transition-shadow">
          <span class="w-6 h-6 rounded-full bg-w4s-success/20 flex items-center justify-center">
            <Icon name="check" size={14} class="text-w4s-success" />
          </span>
          <span class="text-small font-medium text-w4s-navy/80">Devis gratuit</span>
        </div>
        <div class="flex items-center gap-2 px-4 py-2 bg-white/80 rounded-full shadow-sm hover:shadow-md transition-shadow">
          <span class="w-6 h-6 rounded-full bg-w4s-success/20 flex items-center justify-center">
            <Icon name="check" size={14} class="text-w4s-success" />
          </span>
          <span class="text-small font-medium text-w4s-navy/80">Pros certifiés</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Scroll indicator -->
  <div class="absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 text-w4s-navy/40 animate-bounce">
    <span class="text-xs font-medium uppercase tracking-wider">Découvrir</span>
    <Icon name="arrow-down" size={20} />
  </div>
</section>

<script>
  // Parallax effect on mouse move for gradient orbs
  document.addEventListener('DOMContentLoaded', () => {
    const hero = document.querySelector('section');
    const orbs = document.querySelectorAll('.gradient-orb');

    if (window.innerWidth > 768) {
      hero?.addEventListener('mousemove', (e) => {
        const { clientX, clientY } = e;
        const { innerWidth, innerHeight } = window;

        const moveX = (clientX - innerWidth / 2) / innerWidth;
        const moveY = (clientY - innerHeight / 2) / innerHeight;

        orbs.forEach((orb, index) => {
          const speed = (index + 1) * 15;
          orb.style.transform = `translate(${moveX * speed}px, ${moveY * speed}px)`;
        });
      });
    }
  });
</script>
