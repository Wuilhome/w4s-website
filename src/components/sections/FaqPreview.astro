---
import Button from '../ui/Button.astro';
import Icon from '../ui/Icon.astro';
import { getFaqPreview } from '../../data/faq.js';
import { url } from '../../utils/url.js';

const faqItems = getFaqPreview(4);
---

<section class="section bg-gradient-to-b from-w4s-concrete/30 to-white relative overflow-hidden">
  <!-- Decorative background -->
  <div class="absolute inset-0 -z-10" aria-hidden="true">
    <div class="absolute top-0 right-0 w-96 h-96 bg-w4s-accent/5 rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 left-0 w-80 h-80 bg-w4s-navy/5 rounded-full blur-3xl"></div>
  </div>

  <div class="container-w4s">
    <div class="max-w-4xl mx-auto">
      <!-- Header -->
      <div class="text-center mb-12 scroll-animate">
        <span class="inline-flex items-center gap-2 px-4 py-2 bg-w4s-accent/10 text-w4s-accent rounded-full text-small font-medium mb-6">
          <Icon name="help-circle" size={16} />
          FAQ
        </span>
        <h2 class="text-h2 md:text-4xl font-bold text-w4s-navy mb-4">
          Questions <span class="gradient-text">fréquentes</span>
        </h2>
        <p class="text-body-lg text-w4s-navy/70">
          Les réponses à vos interrogations les plus courantes.
        </p>
      </div>

      <!-- FAQ Items with accordion -->
      <div class="space-y-4 mb-12">
        {faqItems.map((item, index) => (
          <details class={`scroll-animate stagger-${index + 1} group bg-white rounded-2xl shadow-card hover:shadow-card-hover transition-all duration-300 overflow-hidden`}>
            <summary class="flex items-center justify-between gap-4 p-6 cursor-pointer list-none">
              <div class="flex items-center gap-4">
                <span class="flex-shrink-0 w-10 h-10 bg-w4s-accent/10 rounded-xl flex items-center justify-center text-w4s-accent font-bold">
                  {index + 1}
                </span>
                <span class="text-body font-semibold text-w4s-navy text-left group-hover:text-w4s-accent transition-colors">
                  {item.question}
                </span>
              </div>
              <div class="flex-shrink-0 w-10 h-10 bg-w4s-concrete/50 rounded-xl flex items-center justify-center group-hover:bg-w4s-accent/10 transition-colors">
                <Icon
                  name="chevron-down"
                  size={20}
                  class="text-w4s-steel transition-transform duration-300 group-open:rotate-180 group-hover:text-w4s-accent"
                />
              </div>
            </summary>
            <div class="px-6 pb-6 pt-2">
              <div class="pl-14 text-body text-w4s-navy/70 leading-relaxed border-l-2 border-w4s-accent/20 ml-5">
                {item.answer}
              </div>
            </div>
          </details>
        ))}
      </div>

      <!-- CTA -->
      <div class="text-center scroll-animate">
        <a
          href={url('/faq')}
          class="inline-flex items-center gap-2 px-6 py-3 bg-transparent border-2 border-w4s-navy text-w4s-navy font-semibold rounded-xl hover:bg-w4s-navy hover:text-white transition-all duration-300 group"
        >
          <span>Voir toutes les questions</span>
          <Icon name="arrow-right" size={18} class="transition-transform group-hover:translate-x-1" />
        </a>
      </div>
    </div>
  </div>
</section>
